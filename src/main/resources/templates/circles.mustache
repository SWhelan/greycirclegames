{{> header}}
{{#game}}
	<div class="alert hidden" id="alert" role="alert"></div>
	<div class="row">
	<div class="col-md-6 col-md-offset-3">
	<table class="table table-bordered">
	{{#displayBoard}}
		<tr>
		{{#row}}
			<td class="centeredCell {{^isTurn}}greyedOut{{/isTurn}}">
				{{#isAPiece}}
				<div class="circle" style="background:{{hex}};">
				{{/isAPiece}}
				{{^isAPiece}}
				<div class="space" row="{{row}}" column ="{{column}}"></div>
				{{/isAPiece}}
			</td>
		{{/row}}
		</tr>		
	{{/displayBoard}}
	</table>
	</div>
	</div>
	<div class="row">
	{{#isTurn}}
	<p>It is your turn.</p>
	{{/isTurn}}
	{{^isTurn}}
	<p>It is <b>not</b> your turn.</p>
	{{/isTurn}}
	<h3>Score</h3>
	<p>You: {{yourCount}}</p>
	<p>Them: {{theirCount}}</p>
	</div>
	<div class="row">
	<p>You:</p>
	<div class="circle" style="background:{{yourColor}};"></div>
	</div>
	<div class="row">
	<p>Them:</p>
	<div class="circle" style="background:{{theirColor}};"></div>
	</div>
<script type="text/javascript">

{{> gameJavaScript}}

var selected;

$(".space").click(function (){
	if(isTurn){
		selected = $(this);
		submitMove();
	} else {
		notTurnAlert();
	}
});

$(".circle").click(function (){
	if(isTurn){
		displayError("You must play on an empty space.", true);
	} else {
		notTurnAlert();
	}
});

function submitMove(){
	moveForm=document.createElement('FORM');
	moveForm.name='makeMove';
	moveForm.method='POST';
	moveForm.action='{{CIRCLES_ROUTE}}{{POST_TURN_ROUTE}}';
	
	hiddenElement=document.createElement('INPUT');
	hiddenElement.type='HIDDEN';
	hiddenElement.name='hex';
	hiddenElement.value="{{hex}}";
	moveForm.appendChild(hiddenElement);
	hiddenElement=document.createElement('INPUT');
	hiddenElement.type='HIDDEN';
	hiddenElement.name='cardColorName';
	hiddenElement.value="{{name}}";
	moveForm.appendChild(hiddenElement);
	hiddenElement=document.createElement('INPUT');
	hiddenElement.type='HIDDEN';
	hiddenElement.name='row';
	hiddenElement.value=selected.attr("row");
	moveForm.appendChild(hiddenElement);
	hiddenElement=document.createElement('INPUT');
	hiddenElement.type='HIDDEN';
	hiddenElement.name='column';
	hiddenElement.value=selected.attr("column");
	moveForm.appendChild(hiddenElement);
	hiddenElement=document.createElement('INPUT');
	hiddenElement.type='HIDDEN';
	hiddenElement.name='gameId';
	hiddenElement.value={{gameId}};
	moveForm.appendChild(hiddenElement);
	moveForm.submit();
	return;
}



</script>
{{/game}}
{{> footer}}